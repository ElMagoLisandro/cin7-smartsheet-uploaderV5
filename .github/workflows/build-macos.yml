name: Build macOS v5.0

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-macos:
    runs-on: macos-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install py2app
    
    - name: Build macOS app with py2app
      run: |
        python setup.py py2app
    
    - name: Verify build
      run: |
        if [ -d "dist/Cin7 Smartsheet Uploader.app" ]; then
          echo "✅ Build successful"
          ls -lah dist/
        else
          echo "❌ Build failed"
          exit 1
        fi
    
    - name: Fix permissions
      run: |
        chmod -R 755 "dist/Cin7 Smartsheet Uploader.app"
    
    - name: Create ZIP
      run: |
        cd dist
        zip -r -y "../Cin7-Smartsheet-Uploader-v5.0-macOS.zip" "Cin7 Smartsheet Uploader.app"
    
    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: Cin7-Smartsheet-Uploader-v5.0-macOS
        path: Cin7-Smartsheet-Uploader-v5.0-macOS.zip
        retention-days: 90
```

5. **Scroll down y en "Commit message" escribe:**
```
   Add GitHub Actions workflow for macOS build
```

6. **Click "Commit changes"**

---

### **OPCIÓN B: Si prefieres crear localmente**

1. **En tu carpeta local del proyecto:**
```
   cin7-v5/
